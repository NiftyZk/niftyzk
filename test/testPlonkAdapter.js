const { describe } = require("mocha");
const { vkeyToVkeyStr, convertSnarkjsProof } = require("../lib/templates/rust/bellman_plonk/adapter");


const validVKey = `
{
 "protocol": "plonk",
 "curve": "bn128",
 "nPublic": 2,
 "power": 11,
 "k1": "2",
 "k2": "3",
 "Qm": [
  "2518533120257087450169017199389289379754792009510919603948742638970614831674",
  "170771259751781996771197625488692358228778548523295262424938715865165816530",
  "1"
 ],
 "Ql": [
  "1006684942952156890764088836354076817239011027724417552951374329954938710002",
  "21236838420895479494510788822451805567299580050889614996301057807568642479293",
  "1"
 ],
 "Qr": [
  "2862403044390908313118172513560129361964522424282558508014555296367919035377",
  "14767272052077534874217216159549062641751264305476696570103178472429704463850",
  "1"
 ],
 "Qo": [
  "6100627334617761118621041054253386728498313498350332247528816383344932795765",
  "7247905695935359765266550549257073026187021972921495259107502553580140683074",
  "1"
 ],
 "Qc": [
  "4918606886426361831347976339777610123187616665344958456848889702112127017016",
  "1880047594052382457733729378209639297368662119953500833114009887270219458726",
  "1"
 ],
 "S1": [
  "9557176926385869790955038362492121331356885972464852901527507263674206563534",
  "3103153010601586131077944229339711039878995373393922587530287212236266299011",
  "1"
 ],
 "S2": [
  "18298551209443012626647014196061261629504426079087775731398226984003547384468",
  "9868318556138846568929909939042343761021083934521891414212753538009759068970",
  "1"
 ],
 "S3": [
  "10600170105927508769020749845118532946090918406977754824672577080763982845282",
  "19162877007836061432468844545427893462056913809918334493967392717021695285161",
  "1"
 ],
 "X_2": [
  [
   "21831381940315734285607113342023901060522397560371972897001948545212302161822",
   "17231025384763736816414546592865244497437017442647097510447326538965263639101"
  ],
  [
   "2388026358213174446665280700919698872609886601280537296205114254867301080648",
   "11507326595632554467052522095592665270651932854513688777769618397986436103170"
  ],
  [
   "1",
   "0"
  ]
 ],
 "w": "1120550406532664055539694724667294622065367841900378087843176726913374367458"
}`

const validProof = `{"A":["18645640733649903610190331981802857555235077764126465154116679484984075238980","20935398055018072728966241174976884545174756674252691127864578770474573936144","1"],"B":["18675846452243220912114152586677855477459977152766112015016949355005188115009","13454948267954128152807729388161525922624170782681962504182050136116168913767","1"],"C":["11191555189717195786918628708486634629654051558833373315936444612248159964181","14097543074313288928894125238771422446712756071196515744163570289204174659109","1"],"Z":["4005704798645659199935524647896989530570703734632622736914145853244622455638","6424996158706449309798867157690329593758779678860556229610752399405995348567","1"],"T1":["12986005830165595145294864343880298299616728205238760506591985782499529985431","9184630788007649873118372176055585659639834589010120484653527207490871998289","1"],"T2":["12939227105715916923072350342352716123415850044584432397630838679526816994231","14463739458687562412566555503406775504998266135295202666088551490642984093527","1"],"T3":["9595601618843948357139518750879714991466959841703866662546993168670282503333","10845533622259330174572266396991683084995151496787874992530050597040035038968","1"],"Wxi":["16610326050598012686020525630627768948531679539545833734137558834292858335217","5075584681782238273346838646338573426054355045073937473435966613293502038018","1"],"Wxiw":["2959860905930039456808194936508330438312527389838884598847763383402108347773","19037961647826135365691848276433593683452809125879308749432671361669151098923","1"],"eval_a":"13073395164225180492182113273028649516295153016900547131043323659840559015325","eval_b":"11077169415246178172204776434184178720587898808899964235393496320565208658296","eval_c":"1671964706422249077478115317373590892456180078644022093727041946265973231704","eval_s1":"19613156100706904262684211402502182760369885276205128893221559311365676815667","eval_s2":"15564475900419085966550052702607721799697018475316380996133509624860098788930","eval_zw":"9912846615462903356687912587806776223178022103459024294198384303504696485150","protocol":"plonk","curve":"bn128"}`

const publicSignals = `["3265654849311302252423588683991757771230884359823079680238214038188846601667","4942853559948402205158098547203049697522877458730684134761388174599252712525"]`

describe("adapter for plonk", function () {
    it("test converting vkey", async function () {

        const json = JSON.parse(validVKey)

        const vkSTr = await vkeyToVkeyStr(json)
        // console.log(vkSTr)
        //TODO: now these can be tested with the cosmwasm contracts 
    })

    it("test converting proof:", async function () {

        const proof = await convertSnarkjsProof(JSON.parse(validProof), JSON.parse(publicSignals))

        console.log(proof)
        //TODO: now it can be tested with the cosmwasm contract
    })
})
